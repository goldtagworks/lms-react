# 090_quality_checklist — 품질 게이트 & 수용 기준

본 문서는 LMS 플랫폼 배포 전 반드시 충족해야 하는 품질, 보안, 성능, 접근성, 테스트 기준을 정의한다.

────────────────────────────────────────────────────
## 1) 접근성 (Accessibility)
- 대비 비율 ≥ 4.5:1, 포커스 링 명확히 표시.
- 모든 페이지는 h1 제목 존재, 키보드로 전환 가능.
- 버튼/링크는 aria-label 또는 텍스트 제공.
- 스크린리더로 핵심 흐름(로그인→결제→학습→시험→수료증) 탐색 가능.

────────────────────────────────────────────────────
## 2) 보안 (Security)
- Supabase RLS 정책 활성화 및 검증 완료.
- Storage: 비공개 버킷 + 서명 URL TTL ≤ 2h.
- 업로드 파일 MIME 검증 및 확장자 화이트리스트.
- 비밀번호/토큰/API Key는 클라이언트에 저장 금지.
- 결제 웹훅: HMAC 서명 검증 필수.

────────────────────────────────────────────────────
## 3) 성능 (Performance)
- 모든 목록 API는 서버 페이징(limit/offset).
- courses, enrollments, lesson_progress, exam_attempts에 인덱스 존재.
- 이미지/정적 리소스: CDN + 캐싱 전략 적용.
- 프런트 React Query: staleTime ≥ 60s, retry 1회.

────────────────────────────────────────────────────
## 4) 코드 품질 (Code Quality)
- lint/test 통과 (ESLint, Prettier, Jest/Vitest).
- i18n 키 중복 없음. 모든 UI 텍스트는 i18n 사용.
- React 컴포넌트는 Props 계약 준수, 타입 체크 완료.
- Edge Functions: 타입 정의 및 에러 코드 문서화.

────────────────────────────────────────────────────
## 5) 테스트 (Testing)
- E2E 필수 시나리오 (Gherkin 기반):
  1) 결제 → 웹훅 → ENROLLED 전환
  2) 레슨 시청 → progress ≥ required
  3) 시험 응시 → 합격 → 수료증 발급(PDF/메일)
- 단위 테스트: 최소 70% 커버리지.
- 실패 시 알림 + CI 파이프라인 중단.

────────────────────────────────────────────────────
## 6) 모니터링 & 알람 (Monitoring)
- Edge Functions 로그: request_id, user_id, enrollment_id, status.
- 경보 조건:
  - 5분 내 E_WEBHOOK_INVALID_SIG ≥ 3
  - E_STORAGE_FAIL ≥ 5
  - E_MAIL_FAIL ≥ 5
- 대시보드: 결제 성공률, 평균 웹훅 지연, 시험 합격률.

────────────────────────────────────────────────────
## 7) 수용 기준 (Acceptance Criteria)
- AC1: 로그인→결제→학습→시험→수료증 흐름이 100% 성공.
- AC2: 위 3개 E2E 시나리오가 모두 통과.
- AC3: 접근성/보안/성능 항목 체크리스트 준수.
- AC4: 모든 에러는 정의된 코드/메시지로 매핑.
- AC5: 관리자/수강생 역할에 따른 RBAC이 정확히 작동.