# 081_exam_rules — 시험 규칙 상세

본 문서는 시험 진행 중 발생할 수 있는 세부 규칙과 UX 가드를 정의한다.

────────────────────────────────────────────────────
- 시험 제한 시간은 관리자/강사가 exam.time_limit_minutes 필드로 설정한다. (미설정 시 기본 30분)
- 타이머는 서버 시간 기준으로 시작.
- 잔여 시간은 분:초 형태로 상단 표시.
- 타이머 만료 시 자동 제출.
- 네트워크 오류로 제출 실패 시: 로컬에 응답 저장, 재시도 버튼 노출.

────────────────────────────────────────────────────
## 2) 포커스 이탈 규칙
- 탭/창 전환 감지.
- 최초 2회: 경고 배너("시험 화면을 벗어났습니다").
- 3회째: 자동 제출 처리.
- 경고/자동 제출 이벤트는 audit 로그 기록.

────────────────────────────────────────────────────
## 3) 자동 제출
- 트리거:
  - 타이머 만료
  - 포커스 이탈 3회
  - 서버 강제 종료(운영자)
- 제출 시 "자동 제출되었습니다" 메시지 표시.
- 결과는 채점 함수(`/exams/grade`) 호출 후 반영.

────────────────────────────────────────────────────
## 4) 재응시 정책
- 재응시 허용: true (기본 3회).
- 쿨다운: 24시간.
- 시도 횟수 및 쿨다운 정보는 exam_attempts 테이블로 관리.
- 불합격 시: "다음 응시는 {{hours}}시간 후 가능합니다" 메시지 표시.

────────────────────────────────────────────────────
## 5) UX 가드
- 시험 시작 전 eligibility(progress ≥ required) 검사.
- 시험 중: 타이머/진행바/남은 문항 수 표시.
- 제출 전: 미답안 경고 모달(남은 n개).
- 제출 후: 결과 화면(score, 합격 여부).
- 합격 시: "수료증 발급 중" 배너.
- 불합격 시: 재응시 쿨다운 안내.

────────────────────────────────────────────────────
## 6) 테스트 수용 기준 (AC)
- AC1: 타이머 만료 시 자동 제출이 수행된다.
- AC2: 포커스 이탈 3회 시 자동 제출된다.
- AC3: 제출 전 미답안이 있으면 경고 모달이 표시된다.
- AC4: 불합격 시 재응시 쿨다운 메시지가 표시된다.
- AC5: 합격 시 certificates 레코드가 생성된다.